<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rose Day Special üåπ</title>
    <style>
        :root {
            --primary-red: #d90429; 
            --soft-bg: #fff0f3;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--soft-bg);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden; text-align: center;
        }

        .card {
            background: white; padding: 2.5rem; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(217, 4, 41, 0.15);
            width: 85%; max-width: 400px; min-height: 350px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: all 0.5s ease; z-index: 10;
        }

        .hidden { display: none !important; }

        /* Animations */
        .rose-loader { font-size: 4rem; animation: grow 2s infinite ease-in-out; }
        @keyframes grow { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        .heart-fall {
            position: fixed; top: -10vh; font-size: 2rem;
            animation: fall linear forwards; z-index: 1;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* UI Elements */
        input {
            padding: 12px; border: 2px solid #ffccd5; border-radius: 10px;
            margin: 1.5rem 0; outline: none; width: 80%; text-align: center;
        }

        button {
            padding: 12px 30px; border: none; border-radius: 30px;
            cursor: pointer; font-weight: bold; font-size: 1rem; transition: transform 0.2s;
        }

        .btn-primary { background: var(--primary-red); color: white; box-shadow: 0 5px 15px rgba(217, 4, 41, 0.3); }
        .btn-secondary { background: #f0f0f0; color: #555; }
        #no-btn { position: relative; }

        h1 { color: var(--primary-red); font-size: 1.8rem; margin-bottom: 0.5rem;}
        p { color: #666; line-height: 1.5; }
        .big-emoji { font-size: 3rem; margin: 1rem 0; }
    </style>
</head>
<body>

    <div id="loadingScreen" class="card">
        <div class="rose-loader">üåπ</div>
        <p style="margin-top: 20px; font-weight: bold; color: var(--primary-red);">GROWING YOUR ROSE...</p>
    </div>

    <div id="nameEntryScreen" class="card hidden">
        <div class="big-emoji">üåπ</div>
        <h1>Wait a second!</h1>
        <p>Who is this special rose for?</p>
        <input type="text" id="userNameInput" placeholder="Enter a name...">
        <button class="btn-primary" onclick="submitPublicName()">Continue</button>
    </div>

    <div id="questionScreen" class="card hidden">
        <div class="big-emoji">üåπ</div>
        <h1 id="proposalTitle">For You</h1>
        <p>Will you accept this digital rose and be my Valentine?</p>
        <div style="display: flex; gap: 15px; margin-top: 25px; width: 100%; justify-content: center;">
            <button class="btn-primary" onclick="showFinal()" style="flex: 1; max-width: 150px;">Yes, I will! ‚ù§Ô∏è</button>
            <button id="no-btn" class="btn-secondary" style="flex: 1; max-width: 150px;">No</button>
        </div>
    </div>

    <div id="finalScreen" class="card hidden">
        <h1 style="color: var(--primary-red);">Happy Rose Day!</h1>
        <h2 id="finalNameDisplay">Hey!</h2>
        <p id="finalMessage">"Just like this digital rose, my feelings for you are designed to never wilt or fade. You make every day feel like springtime. Happy Rose Day to the one who holds the key to my heart!"</p>
        <div class="big-emoji">üåπ‚ú®üíñ</div>
    </div>

    <script>
        /* --- CONFIGURATION --- */
        const HIS_NAME = "Abhinandan"; // <--- CHANGE THIS TO HIS NAME
        
        // 1. Check for the Secret Mode in the URL (?to=special)
        const urlParams = new URLSearchParams(window.location.search);
        const isSecretMode = urlParams.get('to') === 'special';

        let finalName = "";

        // 2. Initial Setup after 3 seconds of loading
        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            
            if (isSecretMode) {
                // Secret Mode Active
                finalName = HIS_NAME;
                document.getElementById('proposalTitle').innerText = `For You, ${finalName} ‚ù§Ô∏è`;
                document.getElementById('finalNameDisplay').innerText = `Hey ${finalName}!`;
                document.title = `A Special Rose for ${finalName} üåπ`;
                document.getElementById('questionScreen').classList.remove('hidden');
            } else {
                // Public Mode Active
                document.getElementById('nameEntryScreen').classList.remove('hidden');
            }
        }, 3000);

        // 3. Handle Public Name Submission
        function submitPublicName() {
            const input = document.getElementById('userNameInput');
            if(!input.value.trim()) return input.style.borderColor = 'red';
            
            finalName = input.value.trim();
            document.getElementById('proposalTitle').innerText = `For You, ${finalName}`;
            document.getElementById('finalNameDisplay').innerText = `Hey ${finalName}!`;
            document.getElementById('nameEntryScreen').classList.add('hidden');
            document.getElementById('questionScreen').classList.remove('hidden');
        }

        // 4. Final Screen Transition
        function showFinal() {
            document.getElementById('questionScreen').classList.add('hidden');
            document.getElementById('finalScreen').classList.remove('hidden');
            startFallingHearts();
        }

        // 5. Dodging Button Logic
        const noBtn = document.getElementById('no-btn');
        function moveButton() {
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth - 20);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight - 20);
            noBtn.style.position = 'fixed';
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        }
        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); });

        // 6. Falling Hearts
        function startFallingHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart-fall');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 100 + 'vw';
                const duration = Math.random() * 3 + 3;
                heart.style.animationDuration = duration + 's';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), duration * 1000);
            }, 300);
        }
    </script>
</body>
</html>
